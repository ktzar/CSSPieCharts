<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript">

var colors = ['#fcc', '#cfc', '#ccf'];

function doPie(values, el){
    console.log(values);
    sum = 0;
    total = 0;
    for(val in values) {
        total+=values[val];
    }
    angles = new Array();
    $(el).html('');
    for(val in values) {
        r = parseInt(Math.random()*255);
        g = parseInt(Math.random()*255);
        b = parseInt(Math.random()*255);
        angle = parseInt(36000*(values[val]/total))/100;
        angles.push(angle);
        //put 2
        if (angle > 180){
            $(el).append('<div style="-webkit-transform:rotate('+sum+'deg)" class="front"><div style="background:'+colors[val]+';-webkit-transform:rotate('+(180)+'deg)" class="pie"></div></div>');
            $(el).append('<div style="-webkit-transform:rotate('+(sum+180)+'deg)" class="front"><div style="background:'+colors[val]+';-webkit-transform:rotate('+(angle-180)+'deg)" class="pie"></div></div>');
        }else{
            $(el).append('<div style="-webkit-transform:rotate('+sum+'deg)" class="front"><div style="background:'+colors[val]+';-webkit-transform:rotate('+angle+'deg)" class="pie"></div></div>');
        }
        sum+=angle;
    }
    console.log(angles);
    $(el).append('<div class="holder back"></div>');
}
function doPieForm(){
    doPie(
        [
            parseInt($('#data_1').val()),
            parseInt($('#data_2').val()),
            parseInt($('#data_3').val())
        ],
        $('figure.chart')
    );
}
$(function(){
    $('.data_range').change(function(){
        doPieForm();
    });
});
</script>
<style type="text/css">
body{background:url(img/background.png);}
figure.chart{
    width: 200px;
    height: 200px;
    border-radius: 200px;
    position: relative;
}
figure.chart div{
    width: inherit;  
    height: inherit;  
    border-radius: inherit;
    position:absolute;
    top:0px;
}
figure.chart div.back{
    background: #ffc;
    z-index:1;
}
figure.chart div.front{
    z-index:2;
    clip: rect(0px,100px,200px,0px);
}
figure.chart div.pie{
    background: #0d0;
    clip: rect(0px,200px,200px,100px);
    -webkit-transform: rotate(30deg);
}
</style>
</head>
<body>
    <figure class="chart">
    </figure>
    <input type="range" min="0" max="100" class="data_range" id="data_1"/>
    <input type="range" min="0" max="100" class="data_range" id="data_2"/>
    <input type="range" min="0" max="100" class="data_range" id="data_3"/>
	
</body>
</html>
